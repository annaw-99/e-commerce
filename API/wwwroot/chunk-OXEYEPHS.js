import{a as J}from"./chunk-FMNKK44G.js";import{a as S}from"./chunk-TMIYIFL6.js";import{b as I}from"./chunk-WSH46PCB.js";import{b as O}from"./chunk-WJOQNDRN.js";import{A as h,C as f,E as j,F as g,G as _,J as F,M as P,N,O as w,Q as M,S as b}from"./chunk-2DFZ4NJD.js";import{h as U,ia as E,j as y}from"./chunk-BMBN6P24.js";import"./chunk-6XXA7HXI.js";import{Db as c,Eb as A,Gb as G,Hb as V,Ib as r,Jb as n,Kb as u,Rb as x,Tb as C,Wb as k,db as a,dc as l,eb as L,ec as q,fc as B,ka as m,lc as d,oa as s,ub as v,yb as p}from"./chunk-EPYIBYH4.js";var R=class e{fb=m(M);accountService=m(I);router=m(y);activatedRoute=m(U);returnUrl="/shop";constructor(){let o=this.activatedRoute.snapshot.queryParams.returnUrl;o&&(this.returnUrl=o)}loginForm=this.fb.group({email:[""],password:[""]});onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=s({type:e,selectors:[["app-login"]],standalone:!0,features:[d],decls:10,vars:1,consts:[[1,"max-w-md","mx-auto","mt-20","p-8","bg-white","rounded-none"],[3,"ngSubmit","formGroup"],[1,"text-start","mb-4"],[1,"text-2xl","font-bold","text-primary","uppercase"],[1,"space-y-4","mb-6"],["type","email","formControlName","email","placeholder","name@example.com",1,"w-full","text-sm","border","border-black","px-2","py-1","focus:outline-none","focus:ring-1","focus:ring-black"],["type","password","formControlName","password","placeholder","Password",1,"w-full","text-sm","border","border-black","px-2","py-1","focus:outline-none","focus:ring-1","focus:ring-black"],["mat-flat-button","","type","submit",1,"w-full","py-2","bg-black","text-white"]],template:function(t,i){t&1&&(r(0,"mat-card",0)(1,"form",1),x("ngSubmit",function(){return i.onSubmit()}),r(2,"div",2)(3,"h1",3),l(4,"Login"),n()(),r(5,"div",4),u(6,"input",5)(7,"input",6),n(),r(8,"button",7),l(9,"Sign in"),n()()()),t&2&&(a(),p("formGroup",i.loginForm))},dependencies:[b,F,h,g,_,N,w,S,E]})};function Q(e,o){if(e&1&&(r(0,"mat-error",2),l(1),n()),e&2){let t=C(2);a(),B("",t.label," is required")}}function W(e,o){e&1&&(r(0,"mat-error",2),l(1,"Email is invalid"),n())}function X(e,o){if(e&1&&v(0,Q,2,1,"mat-error",2)(1,W,2,0,"mat-error",2),e&2){let t=C();c(t.control.hasError("required")?0:-1),a(),c(t.control.hasError("email")?1:-1)}}var T=class e{constructor(o){this.controlDir=o;this.controlDir.valueAccessor=this}label="";type="text";writeValue(o){}registerOnChange(o){}registerOnTouched(o){}get control(){return this.controlDir.control}static \u0275fac=function(t){return new(t||e)(L(j,2))};static \u0275cmp=s({type:e,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},standalone:!0,features:[d],decls:3,vars:4,consts:[[1,"mb-4"],[1,"w-full","text-sm","border","border-black","px-2","py-1","focus:outline-none","focus:ring-1","focus:ring-black",3,"formControl","type","placeholder"],[1,"text-xs"]],template:function(t,i){t&1&&(r(0,"div",0),u(1,"input",1),v(2,X,2,2),n()),t&2&&(a(),k("type",i.type),k("placeholder",i.label),p("formControl",i.control),a(),c(i.control.invalid&&(i.control.touched||i.control.dirty)?2:-1))},dependencies:[b,h,g,P,O]})};function Y(e,o){if(e&1&&(r(0,"li"),l(1),n()),e&2){let t=o.$implicit;a(),q(t)}}function Z(e,o){if(e&1&&(r(0,"div",9)(1,"ul",11),G(2,Y,2,1,"li",null,A),n()()),e&2){let t=C();a(2),V(t.validationErrors)}}var D=class e{fb=m(M);accountService=m(I);router=m(y);snack=m(J);validationErrors;registerForm=this.fb.group({firstName:["",f.required],lastName:["",f.required],email:["",[f.required,f.email]],password:["",f.required]});onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successful - you can now login"),this.router.navigateByUrl("/account/login")},error:o=>this.validationErrors=o})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=s({type:e,selectors:[["app-register"]],standalone:!0,features:[d],decls:13,vars:3,consts:[[1,"max-w-md","mx-auto","mt-12","p-8","bg-white","rounded-none"],[3,"ngSubmit","formGroup"],[1,"text-start","mb-4"],[1,"text-2xl","font-bold","text-primary","uppercase"],[1,"mb-6"],["label","First Name","formControlName","firstName"],["label","Last Name","formControlName","lastName"],["label","Email","formControlName","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2","bg-black","text-white",3,"disabled"],[1,"list-disc","px-3"]],template:function(t,i){t&1&&(r(0,"mat-card",0)(1,"form",1),x("ngSubmit",function(){return i.onSubmit()}),r(2,"div",2)(3,"h1",3),l(4,"Register"),n()(),r(5,"div",4),u(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7)(9,"app-text-input",8),n(),v(10,Z,4,0,"div",9),r(11,"button",10),l(12,"Register"),n()()()),t&2&&(a(),p("formGroup",i.registerForm),a(9),c(i.validationErrors?10:-1),a(),p("disabled",i.registerForm.invalid))},dependencies:[b,F,g,_,N,w,S,E,T]})};var Et=[{path:"login",component:R},{path:"register",component:D}];export{Et as accountRoutes};
